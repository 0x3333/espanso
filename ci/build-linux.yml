steps:
  - script: |
      cargo build --release
      cd target/release/
      tar czf "espanso-linux.tar.gz" espanso
      cd ../..
      cp target/release/espanso-*.gz .
      sha256sum espanso-*.gz | awk '{ print $1 }' > espanso-linux-sha256.txt
      ls -la
    displayName: "Cargo build and packaging for Linux"

  - script: |
      cargo install cargo-deb
      cargo deb
      cp target/debian/espanso*amd64.deb espanso-debian-amd64.deb
      sha256sum espanso-*amd64.deb | awk '{ print $1 }' > espanso-debian-amd64-sha256.txt
      ls -la
    displayName: "Packaging deb package"